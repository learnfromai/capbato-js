Dashboard Page Display:
WHEN a user navigates to the dashboard page after successful authentication
THE SYSTEM SHALL display the clinic header with logo, clinic name, user role, username, and profile avatar

WHEN the dashboard page loads
THE SYSTEM SHALL display a sidebar navigation menu with Dashboard, Appointments, Patients, Laboratory, Prescriptions, and Doctors options with Dashboard marked as active

WHEN the dashboard page loads for an admin user
THE SYSTEM SHALL include an additional "Accounts" option in the sidebar navigation

WHEN the dashboard page loads for a doctor user
THE SYSTEM SHALL include an additional "Medical Certificate" option in the sidebar navigation

---

Profile Avatar and Dropdown:
WHEN the dashboard page loads with user information
THE SYSTEM SHALL display a colored profile avatar with user initials in the header

WHEN a user clicks on the profile avatar
THE SYSTEM SHALL display a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL close the dropdown menu

WHEN a user clicks the "Logout" option in the profile dropdown
THE SYSTEM SHALL clear stored authentication data and redirect to the login page

---

Summary Cards Display:
WHEN the dashboard page loads
THE SYSTEM SHALL display three summary cards: Doctor of the Day, Current Patient, and Total Appointments Today

WHEN displaying the Doctor of the Day card
THE SYSTEM SHALL show the assigned doctor name with "Assigned" label

WHEN displaying the Current Patient card
THE SYSTEM SHALL show the name of the patient with the most recent appointment time or "N/A" if no current patient

WHEN displaying the Total Appointments Today card
THE SYSTEM SHALL show the count of confirmed appointments for the current date with today's formatted date

---

Today's Appointments Table:
WHEN the dashboard page loads
THE SYSTEM SHALL display a table showing today's appointments with columns for Patient #, Patient, Reason for visit, Contact, Time, Doctor, and Status

WHEN displaying today's appointments
THE SYSTEM SHALL filter out appointments with times earlier than the current time

WHEN displaying patient names in the appointments table
THE SYSTEM SHALL format names with proper capitalization and make them clickable links to patient information pages

WHEN displaying appointment times
THE SYSTEM SHALL format times in 12-hour format with AM/PM indicators

WHEN the appointments table is displayed
THE SYSTEM SHALL include a "See All" link at the bottom that navigates to the appointments page

---

Lab Test Results Display (Doctor Role Only):
WHEN the dashboard page loads for a doctor user
THE SYSTEM SHALL display a "Today's Lab Test Results" table below the appointments table

WHEN the dashboard page loads for a non-doctor user
THE SYSTEM SHALL hide the lab test results section

WHEN displaying today's lab test results
THE SYSTEM SHALL show columns for Patient #, Patient Name, Lab Test, Date, Status, and Action

WHEN displaying completed lab tests for today
THE SYSTEM SHALL include a "View" button in the Action column for each test result

WHEN no lab tests are completed for today
THE SYSTEM SHALL display "No completed lab tests for today" message in the table

WHEN the lab results table is displayed
THE SYSTEM SHALL include a "See All" link at the bottom that navigates to the laboratory page

---

Lab Results Modal:
WHEN a user clicks the "View" button for a lab test result
THE SYSTEM SHALL open a modal overlay displaying the lab test details in an iframe

WHEN the lab results modal is displayed
THE SYSTEM SHALL show a close button (X) in the top-right corner

WHEN a user clicks the close button or presses the Escape key
THE SYSTEM SHALL close the lab results modal

WHEN a user clicks outside the modal content area
THE SYSTEM SHALL close the lab results modal

WHEN the lab results modal loads
THE SYSTEM SHALL determine the appropriate lab form based on the test type and load it in read-only mode

---

Sidebar Navigation:
WHEN a user clicks on any sidebar navigation item
THE SYSTEM SHALL navigate to the corresponding page (appointments.html, patients.html, etc.)

WHEN a user hovers over a sidebar navigation item
THE SYSTEM SHALL highlight the item with visual feedback

WHEN the dashboard page is active
THE SYSTEM SHALL keep the Dashboard navigation item marked as active with distinct styling

---

Data Refresh and Updates:
WHEN the dashboard page is loaded
THE SYSTEM SHALL automatically refresh appointment data every 10 seconds

WHEN the dashboard page is loaded for doctor users
THE SYSTEM SHALL automatically refresh lab test results data every 30 seconds

WHEN appointment data is refreshed
THE SYSTEM SHALL update the Total Appointments count and the appointments table without page reload

WHEN current patient data is refreshed
THE SYSTEM SHALL update the Current Patient card to show the most recent patient based on appointment times

WHEN lab test results are refreshed
THE SYSTEM SHALL update the lab results table with any new completed tests for today

---

Error Handling:
WHEN there is an error fetching appointment data
THE SYSTEM SHALL log the error to the console and display "Error" in the Current Patient field

WHEN there is an error fetching lab test results
THE SYSTEM SHALL display "Error loading lab results" message in the lab results table

WHEN a user tries to view lab test details but the data cannot be loaded
THE SYSTEM SHALL display an error alert with "Error loading lab test data" message

---

Authentication and Access Control:
WHEN a user accesses the dashboard page without valid authentication
THE SYSTEM SHALL redirect to the login page

WHEN a user has a valid stored authentication token
THE SYSTEM SHALL display the dashboard with appropriate role-based features

WHEN displaying role-based features
THE SYSTEM SHALL show or hide lab test results section based on user role (doctor vs non-doctor)

WHEN displaying role-based sidebar options
THE SYSTEM SHALL include "Accounts" for admin users and "Medical Certificate" for doctor users