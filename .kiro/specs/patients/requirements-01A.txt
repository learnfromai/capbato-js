Page Display and Navigation:
WHEN a user navigates to the patients page
THE SYSTEM SHALL display the page header with clinic logo, clinic name "M.G. Amores Medical Clinic", and user profile information

WHEN the patients page loads
THE SYSTEM SHALL display the sidebar navigation with "Patients" item marked as active

WHEN the patients page is displayed
THE SYSTEM SHALL show the main content area with "Patient Records" title and "Add New Patient" button positioned on the right

WHEN the patients page loads
THE SYSTEM SHALL display a search bar with placeholder text "Search patients..."

---

Data Loading and Display:
WHEN the patients page loads
THE SYSTEM SHALL fetch patient data from the backend API endpoint "/patients"

WHEN patient data is successfully loaded
THE SYSTEM SHALL display a table with columns "Patient #" and "Patient's Name"

WHEN patient data is available
THE SYSTEM SHALL populate the table with PatientID in the first column and formatted full name (FirstName MiddleName LastName) in the second column

WHEN no patient data is available
THE SYSTEM SHALL display "No patients found." message in the table body centered across both columns

WHEN patient data fails to load
THE SYSTEM SHALL log error messages to the console for debugging purposes

---

Search Functionality:
WHEN a user types in the search input field
THE SYSTEM SHALL filter displayed patients in real-time based on the search text

WHEN performing a search
THE SYSTEM SHALL match against PatientID, FirstName, MiddleName, and LastName fields (case-insensitive)

WHEN search results are found
THE SYSTEM SHALL update the table to show only matching patients

WHEN no search results are found
THE SYSTEM SHALL display "No patients found." message in the table

WHEN the user clears the search field
THE SYSTEM SHALL restore the full patient list display

---

User Interactions:
WHEN a user clicks on a patient's name link
THE SYSTEM SHALL navigate to "patientInfo.html" with the patient_id parameter

WHEN a user clicks the "Add New Patient" button
THE SYSTEM SHALL navigate to "add-new-patient.html" page

WHEN a user clicks on sidebar navigation items
THE SYSTEM SHALL navigate to the corresponding pages (Dashboard, Appointments, Laboratory, Prescriptions, Doctors)

WHEN an admin user accesses the patients page
THE SYSTEM SHALL dynamically add an "Accounts" navigation item to the sidebar

---

Profile Management:
WHEN the patients page loads
THE SYSTEM SHALL display user role in uppercase and username from localStorage

WHEN the patients page loads
THE SYSTEM SHALL generate a profile avatar with the first letter of the username and assign a consistent color based on username hash

WHEN a user clicks the profile avatar
THE SYSTEM SHALL toggle the profile dropdown menu with "Settings" and "Logout" options

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL close the dropdown menu

WHEN a user clicks "Settings" in the profile dropdown
THE SYSTEM SHALL display a placeholder message "Settings functionality coming soon!"

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear localStorage (loggedInRole, loggedInUsername, isLoggedIn) and redirect to "login.html"

---

Authentication and Authorization:
WHEN the patients page loads
THE SYSTEM SHALL retrieve and display user authentication data from localStorage

WHEN user role is "admin"
THE SYSTEM SHALL add additional "Accounts" navigation option to the sidebar

WHEN user logs out
THE SYSTEM SHALL remove all authentication tokens and redirect to login page

---

Data Formatting and Display:
WHEN displaying patient names
THE SYSTEM SHALL convert names to title case (first letter uppercase, rest lowercase)

WHEN displaying patient names with middle names
THE SYSTEM SHALL format as "FirstName MiddleName LastName" with proper spacing

WHEN displaying patient names without middle names
THE SYSTEM SHALL format as "FirstName LastName" without extra spaces

WHEN displaying PatientID
THE SYSTEM SHALL show the ID exactly as stored in the database