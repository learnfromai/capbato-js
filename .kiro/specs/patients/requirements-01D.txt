Page Display & Loading:
WHEN a user navigates to the patients page 
THE SYSTEM SHALL verify user authentication and redirect to login page if not authenticated

WHEN the patients page loads for an authenticated user
THE SYSTEM SHALL display the page header with clinic logo, title "M.G. Amores Medical Clinic", user role, and username

WHEN the patients page loads
THE SYSTEM SHALL display the navigation sidebar with Dashboard, Appointments, Patients (active), Laboratory, Prescriptions, and Doctors menu items

WHEN the patients page loads
THE SYSTEM SHALL display the main content area with "Patient Records" title and "Add New Patient" button

WHEN the patients page loads
THE SYSTEM SHALL fetch patient data from the backend API endpoint "/patients"

WHEN the patients page loads
THE SYSTEM SHALL display a search bar with placeholder text "Search patients..."

---

Patient List Display:
WHEN patient data is successfully loaded from the API
THE SYSTEM SHALL display patients in a table with columns "Patient #" and "Patient's Name"

WHEN displaying patient names in the table
THE SYSTEM SHALL format names as "FirstName MiddleName LastName" in title case

WHEN displaying patient names in the table
THE SYSTEM SHALL make each patient name a clickable link to the patient details page

WHEN clicking a patient name link
THE SYSTEM SHALL navigate to "patientInfo.html" with the patient ID as a URL parameter

WHEN no patients are found in the database
THE SYSTEM SHALL display "No patients found." message in the table center

WHEN patient data is loading from the API
THE SYSTEM SHALL display the table structure while waiting for data

---

Search Functionality:
WHEN a user types in the search input field
THE SYSTEM SHALL filter the patient list in real-time based on the search text

WHEN performing a search
THE SYSTEM SHALL match search text against Patient ID, First Name, Middle Name, and Last Name (case-insensitive)

WHEN search results are found
THE SYSTEM SHALL display only matching patients in the table

WHEN no search results are found
THE SYSTEM SHALL display "No patients found." message in the table

WHEN the search input is cleared
THE SYSTEM SHALL restore the full patient list display

---

Navigation & Links:
WHEN a user clicks the "Add New Patient" button
THE SYSTEM SHALL navigate to the "add-new-patient.html" page

WHEN a user clicks on sidebar navigation items
THE SYSTEM SHALL navigate to the corresponding pages (Dashboard → index.html, Appointments → appointments.html, etc.)

WHEN displaying the sidebar
THE SYSTEM SHALL highlight the "Patients" menu item as active with visual emphasis

WHEN a user clicks the clinic logo or title in the header
THE SYSTEM SHALL remain on the current page (no navigation)

---

User Profile & Authentication:
WHEN the patients page loads
THE SYSTEM SHALL display user's profile avatar with the first letter of their username

WHEN displaying the profile avatar
THE SYSTEM SHALL assign a consistent background color based on the username hash

WHEN a user clicks the profile avatar
THE SYSTEM SHALL toggle the profile dropdown menu with "Settings" and "Logout" options

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL close the dropdown menu

WHEN a user clicks "Settings" in the profile dropdown
THE SYSTEM SHALL close the dropdown and display "Settings functionality coming soon!" alert

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear stored authentication data (role, username, isLoggedIn) from localStorage and redirect to login.html

---

Admin Features:
WHEN a user with admin role accesses the patients page
THE SYSTEM SHALL inject an "Accounts" menu item into the sidebar navigation

WHEN an admin user clicks the "Accounts" menu item
THE SYSTEM SHALL navigate to the "accounts.html" page

WHEN a user with non-admin role accesses the patients page
THE SYSTEM SHALL NOT display the "Accounts" menu item in the sidebar

---

Error Handling & Data Loading:
WHEN the API request to fetch patients fails
THE SYSTEM SHALL log the error to browser console and display empty table structure

WHEN there are network connectivity issues
THE SYSTEM SHALL gracefully handle the API request failure and display appropriate feedback

WHEN patient data contains null or undefined values
THE SYSTEM SHALL handle missing data gracefully and display empty strings for missing fields

WHEN API returns invalid or malformed patient data
THE SYSTEM SHALL handle the error and prevent JavaScript runtime errors

---

User Interface Responsiveness:
WHEN the browser window is resized
THE SYSTEM SHALL maintain proper layout and readability of the patient table

WHEN the sidebar is displayed
THE SYSTEM SHALL allocate proper main content area width (calc(100% - 240px))

WHEN hovering over clickable elements (patient links, buttons, navigation items)
THE SYSTEM SHALL provide visual feedback through cursor changes and hover effects

WHEN hovering over patient name links
THE SYSTEM SHALL change text color to gray to indicate interactivity