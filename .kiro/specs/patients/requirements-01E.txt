Page Navigation and Display:
WHEN a user navigates to the patients page
THE SYSTEM SHALL display the patients page with header, sidebar navigation, and main content area

WHEN the patients page loads
THE SYSTEM SHALL display "Patient Records" as the page title in the main content area

WHEN the patients page is displayed
THE SYSTEM SHALL show an "Add New Patient" button with a user-plus icon in the top-right of the main content

WHEN the patients page loads
THE SYSTEM SHALL display a search bar with placeholder text "Search patients..." above the patient table

---

User Authentication and Profile Display:
WHEN the patients page loads and user is authenticated
THE SYSTEM SHALL display the user's role in uppercase in the header

WHEN the patients page loads and user is authenticated  
THE SYSTEM SHALL display the username below the role in the header

WHEN the patients page loads and user is authenticated
THE SYSTEM SHALL generate a profile avatar with the first letter of the username and a consistent color based on username hash

WHEN a user clicks on the profile avatar
THE SYSTEM SHALL toggle a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear localStorage authentication data and redirect to login.html

WHEN a user clicks "Settings" in the profile dropdown
THE SYSTEM SHALL show "Settings functionality coming soon!" alert message

---

Sidebar Navigation:
WHEN the patients page loads
THE SYSTEM SHALL display sidebar navigation with Dashboard, Appointments, Patients, Laboratory, Prescriptions, and Doctors menu items

WHEN the patients page is displayed
THE SYSTEM SHALL mark the "Patients" navigation item as active

WHEN a user is an admin
THE SYSTEM SHALL dynamically add an "Accounts" menu item to the sidebar

WHEN a user clicks any sidebar navigation item
THE SYSTEM SHALL redirect to the corresponding page (index.html, appointments.html, laboratory.html, etc.)

---

Patient Data Loading and Display:
WHEN the patients page loads
THE SYSTEM SHALL fetch patient data from the /patients API endpoint

WHEN patient data is successfully loaded
THE SYSTEM SHALL display a table with "Patient #" and "Patient's Name" columns

WHEN patient data is successfully loaded
THE SYSTEM SHALL format patient names in Title Case (FirstName MiddleName LastName)

WHEN patient data is successfully loaded
THE SYSTEM SHALL make each patient name a clickable link to patientInfo.html with patient_id parameter

WHEN no patient data is available
THE SYSTEM SHALL display "No patients found." message in the table

WHEN API request fails
THE SYSTEM SHALL log error to console for debugging

---

Search Functionality:
WHEN a user types in the search input field
THE SYSTEM SHALL filter the patient table in real-time based on the search text

WHEN a user searches
THE SYSTEM SHALL match against both Patient ID and full patient name (case-insensitive)

WHEN search results are filtered
THE SYSTEM SHALL update the table display to show only matching patients

WHEN search input is cleared
THE SYSTEM SHALL restore the full patient list in the table

---

Navigation Actions:
WHEN a user clicks the "Add New Patient" button
THE SYSTEM SHALL redirect to add-new-patient.html page

WHEN a user clicks on a patient name link
THE SYSTEM SHALL redirect to patientInfo.html with the patient_id query parameter

WHEN a user clicks outside the profile dropdown while it's open
THE SYSTEM SHALL close the profile dropdown menu

---

Table Display and Formatting:
WHEN patient data is displayed in the table
THE SYSTEM SHALL center-align the Patient # column

WHEN patient data is displayed in the table  
THE SYSTEM SHALL left-align the Patient's Name column with left padding

WHEN patient names contain middle names
THE SYSTEM SHALL include the middle name in the formatted display

WHEN patient names are missing middle names
THE SYSTEM SHALL format as "FirstName LastName" without extra spaces

---

Error Handling:
WHEN the API request to load patients fails
THE SYSTEM SHALL log the error to the browser console

WHEN the API response is empty or null
THE SYSTEM SHALL display "No patients found." message in the table

WHEN patient data structure is missing required fields
THE SYSTEM SHALL handle gracefully by using empty strings for missing names

---

Responsive Behavior:
WHEN the page is displayed on different screen sizes
THE SYSTEM SHALL maintain proper layout with fixed header and sidebar positioning

WHEN table content overflows
THE SYSTEM SHALL apply text overflow ellipsis for content that exceeds column width

WHEN hover effects are applied to navigation items
THE SYSTEM SHALL show visual feedback with color changes and background highlighting