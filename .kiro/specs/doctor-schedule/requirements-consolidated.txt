Page Display and Navigation:
WHEN a user navigates to the doctor-schedule page
THE SYSTEM SHALL display the page header with clinic logo, title "M.G. Amores Medical Clinic", user role, username, and profile avatar

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display sidebar navigation with Dashboard, Appointments, Patients, Laboratory, Prescriptions, and Doctors menu items

WHEN the doctor-schedule page loads
THE SYSTEM SHALL highlight the "Doctors" menu item as active to indicate current page location

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display main content with "Doctors" table section and "Doctor's Schedule" calendar section

---

Authentication and Profile Management:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL retrieve and display user role and username from localStorage

WHEN the user role is available
THE SYSTEM SHALL display the role in uppercase format in the header

WHEN the username is available
THE SYSTEM SHALL display the username below the role in the header

WHEN the profile avatar is displayed
THE SYSTEM SHALL show the first letter of the username in uppercase with a color based on username hash

WHEN a user clicks the profile avatar
THE SYSTEM SHALL toggle a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL close the dropdown menu

WHEN a user clicks "Settings" in the profile dropdown
THE SYSTEM SHALL close the dropdown and show "Settings functionality coming soon!" alert

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear localStorage data (loggedInRole, loggedInUsername, isLoggedIn) and redirect to login.html

---

Admin Role Management:
WHEN the logged-in user role is "admin"
THE SYSTEM SHALL dynamically inject an "Accounts" navigation item in the sidebar

WHEN an admin user clicks the "Accounts" navigation item
THE SYSTEM SHALL navigate to accounts.html

---

Sidebar Navigation:
WHEN a user clicks "Dashboard" in the sidebar
THE SYSTEM SHALL navigate to index.html

WHEN a user clicks "Appointments" in the sidebar
THE SYSTEM SHALL navigate to appointments.html

WHEN a user clicks "Patients" in the sidebar
THE SYSTEM SHALL navigate to patients.html

WHEN a user clicks "Laboratory" in the sidebar
THE SYSTEM SHALL navigate to laboratory.html

WHEN a user clicks "Prescriptions" in the sidebar
THE SYSTEM SHALL navigate to prescriptions.html

WHEN a user clicks "Doctors" in the sidebar
THE SYSTEM SHALL navigate to doctor-schedule.html

---

Doctors Table Display and Data Loading:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch doctors data from the /doctors API endpoint

WHEN the doctors API call succeeds
THE SYSTEM SHALL display doctors in a table with columns: "Doctor's Name", "Specialization", "Contact Number"

WHEN rendering doctor names in the table
THE SYSTEM SHALL format names as "Dr. [FirstName] [LastName]"

WHEN a doctor's contact number is not available
THE SYSTEM SHALL display "N/A" in the Contact Number column

WHEN displaying the doctors table
THE SYSTEM SHALL left-align doctor names and center-align specialization and contact number columns

WHEN the doctors API call fails
THE SYSTEM SHALL log the error to console and display fallback static doctor data with sample doctors (Maria Santos, Juan Cruz, Anna Reyes)

WHEN hovering over doctors table rows
THE SYSTEM SHALL apply a light gray background color for better visibility

---

Calendar Display and Navigation:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL display "Doctor's Schedule" title with an "Edit" button positioned at the top right

WHEN the calendar section loads
THE SYSTEM SHALL show the current month and year in uppercase format with previous and next month navigation buttons

WHEN the calendar displays
THE SYSTEM SHALL show a grid with day headers (Sun, Mon, Tue, Wed, Thu, Fri, Sat) and calendar cells

WHEN the calendar renders dates
THE SYSTEM SHALL display date numbers in bold formatting with zero-padded format (e.g., "01", "02")

WHEN a calendar cell represents a date outside the current month
THE SYSTEM SHALL display the cell as inactive with transparent background

WHEN a user clicks the previous month button
THE SYSTEM SHALL navigate to the previous month and update the calendar display

WHEN a user clicks the next month button
THE SYSTEM SHALL navigate to the next month and update the calendar display

---

Schedule Data Display:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch schedule data from the /schedules API endpoint

WHEN schedule data is successfully loaded
THE SYSTEM SHALL cache the data for calendar navigation without additional API calls

WHEN a date has scheduled doctor data
THE SYSTEM SHALL display the doctor name in bold and the time below it within the calendar cell

WHEN a date has no scheduled doctor data
THE SYSTEM SHALL display only the date number without additional information

WHEN navigating between months
THE SYSTEM SHALL maintain the loaded schedule data and display relevant schedules for the viewed month

---

Schedule Management and Editing:
WHEN a user clicks the "Edit" button
THE SYSTEM SHALL display an overlay with an iframe loading edit-sched.html

WHEN the edit schedule overlay opens
THE SYSTEM SHALL display a close button (X) in the top-right corner of the overlay

WHEN a user clicks the close button
THE SYSTEM SHALL hide the overlay and clear the iframe source

WHEN the edit schedule form loads
THE SYSTEM SHALL display input fields for Doctor Name (text), Date (date picker), and Time (text with placeholder "e.g. 9AM - 5PM")

WHEN the edit schedule form loads
THE SYSTEM SHALL display a "Save" button with save icon for form submission

WHEN a user submits the edit schedule form with valid data
THE SYSTEM SHALL prevent default form submission and send POST request to /schedules endpoint with doctor, date, and time data

WHEN the schedule form submission succeeds
THE SYSTEM SHALL send a "scheduleUpdated" postMessage to the parent window

WHEN the parent window receives a "scheduleUpdated" message
THE SYSTEM SHALL hide the overlay, clear iframe source, and reload the page

WHEN the schedule form submission fails
THE SYSTEM SHALL display "Failed to save schedule." alert and log error to console

---

Error Handling and API Integration:
WHEN fetching doctors data from the API fails
THE SYSTEM SHALL log the error to console and fallback to displaying static sample doctor data

WHEN fetching schedules data from the API fails
THE SYSTEM SHALL log the error to console with message "Failed to load schedules:" and continue with empty calendar display

WHEN API calls are made
THE SYSTEM SHALL handle both successful responses and error conditions gracefully without showing error messages to users during loading

---

User Interface Interactions:
WHEN hovering over navigation items in the sidebar
THE SYSTEM SHALL change background color to light gray and text color to teal

WHEN hovering over the profile avatar
THE SYSTEM SHALL apply scale transformation (1.05) and enhanced shadow effect

WHEN the current navigation item is active
THE SYSTEM SHALL display green background, teal text, and left border indicator