Page Display and Navigation:
WHEN a user navigates to the doctor-schedule page
THE SYSTEM SHALL display a header with clinic logo, title "M.G. Amores Medical Clinic", user role display, username display, and profile avatar

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display a sidebar navigation with Dashboard, Appointments, Patients, Laboratory, Prescriptions, and Doctors menu items with "Doctors" highlighted as active

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display the main content area with "Doctors" table section and "Doctor's Schedule" calendar section

---

Authentication and Profile Management:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL retrieve and display user role (in uppercase) and username from localStorage

WHEN the profile avatar is displayed
THE SYSTEM SHALL show the first letter of the username in a colored circle with color assigned based on username hash

WHEN a user clicks on the profile avatar
THE SYSTEM SHALL toggle a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL hide the dropdown menu

WHEN a user clicks "Settings" in the profile dropdown
THE SYSTEM SHALL close the dropdown and display "Settings functionality coming soon!" alert

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear localStorage data (loggedInRole, loggedInUsername, isLoggedIn) and redirect to login.html

---

Admin Role Management:
WHEN a user with "admin" role accesses the page
THE SYSTEM SHALL dynamically inject an "Accounts" menu item in the sidebar navigation

WHEN an admin user clicks the "Accounts" sidebar item
THE SYSTEM SHALL navigate to accounts.html

---

Doctors Table Display and Data Loading:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch doctors data from the backend API endpoint "/doctors"

WHEN doctors data is successfully loaded from the API
THE SYSTEM SHALL display a table with columns "Doctor's Name", "Specialization", and "Contact Number"

WHEN displaying doctor names in the table
THE SYSTEM SHALL format names as "Dr. [FirstName] [LastName]"

WHEN the contact number is not available for a doctor
THE SYSTEM SHALL display "N/A" in the Contact Number column

WHEN the doctors API call fails
THE SYSTEM SHALL log the error to console and display fallback static doctor data with sample doctors (Maria Santos - General Medicine, Juan Cruz - Cardiology, Anna Reyes - Pediatrics)

WHEN displaying the doctors table
THE SYSTEM SHALL left-align doctor names and center-align specialization and contact number columns

WHEN a user hovers over a doctor table row
THE SYSTEM SHALL highlight the row with a light gray background

---

Calendar Display and Navigation:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL display a monthly calendar grid with day headers (Sun, Mon, Tue, Wed, Thu, Fri, Sat)

WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch schedule data from the backend API endpoint "/schedules"

WHEN the calendar is displayed
THE SYSTEM SHALL show the current month and year in uppercase format with previous and next month navigation buttons

WHEN the calendar renders
THE SYSTEM SHALL display dates in a grid format with date numbers shown in bold using zero-padded format

WHEN a calendar cell represents a date outside the current month
THE SYSTEM SHALL display the cell as inactive with transparent background

WHEN a date has scheduled doctor data
THE SYSTEM SHALL display the doctor name in bold and the time below it within the calendar cell

WHEN a user clicks the previous month button (left chevron)
THE SYSTEM SHALL navigate to the previous month and update the calendar display

WHEN a user clicks the next month button (right chevron)
THE SYSTEM SHALL navigate to the next month and update the calendar display

WHEN navigating between months
THE SYSTEM SHALL use cached schedule data without making additional API calls

---

Schedule Editing:
WHEN the calendar section is displayed
THE SYSTEM SHALL show an "Edit" button with edit icon in the top-right corner

WHEN a user clicks the "Edit" button
THE SYSTEM SHALL display an overlay modal containing an iframe with edit-sched.html

WHEN the edit schedule overlay opens
THE SYSTEM SHALL display a close button (X) in the top-right corner

WHEN a user clicks the close button on the edit overlay
THE SYSTEM SHALL hide the overlay and clear the iframe source

WHEN the edit schedule form loads in the iframe
THE SYSTEM SHALL display input fields for Doctor Name (text), Date (date picker), and Time (text with placeholder "e.g. 9AM - 5PM")

WHEN a user submits the edit schedule form with valid data
THE SYSTEM SHALL prevent default form submission and send a POST request to "/schedules" endpoint with doctor, date, and time data

WHEN the schedule form submission succeeds
THE SYSTEM SHALL send a postMessage with type "scheduleUpdated" to the parent window

WHEN the parent window receives a "scheduleUpdated" message
THE SYSTEM SHALL close the overlay and reload the page to refresh calendar data

WHEN the schedule form submission fails
THE SYSTEM SHALL display an alert "Failed to save schedule." and log the error to console

---

Sidebar Navigation:
WHEN a user clicks "Dashboard" in the sidebar
THE SYSTEM SHALL navigate to index.html

WHEN a user clicks "Appointments" in the sidebar
THE SYSTEM SHALL navigate to appointments.html

WHEN a user clicks "Patients" in the sidebar
THE SYSTEM SHALL navigate to patients.html

WHEN a user clicks "Laboratory" in the sidebar
THE SYSTEM SHALL navigate to laboratory.html

WHEN a user clicks "Prescriptions" in the sidebar
THE SYSTEM SHALL navigate to prescriptions.html

WHEN a user clicks "Doctors" in the sidebar
THE SYSTEM SHALL navigate to doctor-schedule.html

---

API Integration and Error Handling:
WHEN fetching schedules data from the API fails
THE SYSTEM SHALL log the error to console with message "Failed to load schedules:" and continue displaying empty calendar

WHEN fetching doctors data from the API fails
THE SYSTEM SHALL log the error to console with message "Failed to load doctors:" and display fallback static doctor data

WHEN the schedules API responds successfully
THE SYSTEM SHALL cache the schedules data and render them on the calendar

WHEN the doctors API responds successfully
THE SYSTEM SHALL render the doctors table with the received data

---

User Interface Interactions:
WHEN a user hovers over navigation items in the sidebar
THE SYSTEM SHALL change background color to light gray and text color to teal

WHEN a user hovers over the profile avatar
THE SYSTEM SHALL apply scale transformation (1.05) and enhanced shadow effect

WHEN the page is displayed on different screen sizes
THE SYSTEM SHALL maintain responsive layout with appropriate spacing and font sizes for mobile devices