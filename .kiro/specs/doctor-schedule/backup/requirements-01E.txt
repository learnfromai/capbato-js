Page Display and Navigation:
WHEN a user navigates to the doctor-schedule page
THE SYSTEM SHALL display a header with clinic logo, title "M.G. Amores Medical Clinic", user role display, username display, and profile avatar

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display a sidebar navigation menu with Dashboard, Appointments, Patients, Laboratory, Prescriptions, and Doctors options, with "Doctors" highlighted as active

WHEN the doctor-schedule page loads
THE SYSTEM SHALL display the main content area with "Doctors" table section and "Doctor's Schedule" calendar section

---

Profile Management:
WHEN a user's profile avatar is displayed
THE SYSTEM SHALL show the first letter of the username in a colored circle based on username hash

WHEN a user clicks on the profile avatar
THE SYSTEM SHALL display a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks "Logout" in the profile dropdown
THE SYSTEM SHALL clear localStorage authentication data and redirect to login.html

WHEN a user clicks outside the profile dropdown
THE SYSTEM SHALL hide the dropdown menu

---

Doctors Table Display:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch doctors data from the backend API endpoint "/doctors"

WHEN doctors data is successfully loaded
THE SYSTEM SHALL display a table with columns "Doctor's Name", "Specialization", and "Contact Number"

WHEN doctors data fails to load from API
THE SYSTEM SHALL display fallback static doctor data with at least 3 sample doctors

WHEN the doctors table is displayed
THE SYSTEM SHALL format doctor names as "Dr. [FirstName] [LastName]" and center-align specialization and contact number columns

---

Calendar Display and Navigation:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL display a monthly calendar grid with day headers (Sun, Mon, Tue, Wed, Thu, Fri, Sat)

WHEN the doctor-schedule page loads
THE SYSTEM SHALL fetch schedule data from the backend API endpoint "/schedules"

WHEN the calendar is displayed
THE SYSTEM SHALL show the current month and year in uppercase format above the calendar

WHEN the calendar is rendered
THE SYSTEM SHALL display navigation arrows for previous and next month on either side of the month label

WHEN a user clicks the previous month arrow
THE SYSTEM SHALL navigate to the previous month and update the calendar display

WHEN a user clicks the next month arrow
THE SYSTEM SHALL navigate to the next month and update the calendar display

---

Schedule Data Display:
WHEN schedule data is loaded successfully
THE SYSTEM SHALL display doctor schedules on the appropriate calendar dates

WHEN a calendar cell contains schedule data
THE SYSTEM SHALL show the doctor name in bold and the time schedule below it

WHEN a calendar cell has no schedule data
THE SYSTEM SHALL display only the date number in the cell

WHEN calendar cells represent dates outside the current month
THE SYSTEM SHALL render them as inactive/transparent cells

---

Schedule Editing:
WHEN the calendar section is displayed
THE SYSTEM SHALL show an "Edit" button with edit icon in the top-right corner of the calendar

WHEN a user clicks the "Edit" button
THE SYSTEM SHALL display an overlay modal containing an iframe with edit-sched.html

WHEN the edit schedule overlay is opened
THE SYSTEM SHALL load the edit-sched.html form with fields for doctor name, date, and time

WHEN a user clicks the close button (X) in the edit overlay
THE SYSTEM SHALL hide the overlay and clear the iframe source

WHEN a schedule is successfully saved in the edit form
THE SYSTEM SHALL receive a postMessage event and reload the calendar data

---

Sidebar Navigation:
WHEN a user clicks on "Dashboard" in the sidebar
THE SYSTEM SHALL navigate to index.html

WHEN a user clicks on "Appointments" in the sidebar
THE SYSTEM SHALL navigate to appointments.html

WHEN a user clicks on "Patients" in the sidebar
THE SYSTEM SHALL navigate to patients.html

WHEN a user clicks on "Laboratory" in the sidebar
THE SYSTEM SHALL navigate to laboratory.html

WHEN a user clicks on "Prescriptions" in the sidebar
THE SYSTEM SHALL navigate to prescriptions.html

WHEN a user clicks on "Doctors" in the sidebar
THE SYSTEM SHALL navigate to doctor-schedule.html

---

Admin Role Management:
WHEN a user with "admin" role accesses the page
THE SYSTEM SHALL dynamically inject an "Accounts" menu item in the sidebar

WHEN an admin user clicks the "Accounts" sidebar item
THE SYSTEM SHALL navigate to accounts.html

---

Authentication and Security:
WHEN the doctor-schedule page loads
THE SYSTEM SHALL check localStorage for "loggedInRole" and "loggedInUsername" to display user information

WHEN required authentication data is missing
THE SYSTEM SHALL handle gracefully by not displaying user-specific information

WHEN the page loads
THE SYSTEM SHALL set the role display to uppercase format and show username below it

---

Error Handling and Fallbacks:
WHEN the doctors API call fails
THE SYSTEM SHALL log the error and display fallback doctor data from static sources

WHEN the schedules API call fails
THE SYSTEM SHALL log the error message and display an empty calendar

WHEN the edit schedule form submission fails
THE SYSTEM SHALL display an alert message "Failed to save schedule" to the user

---

Responsive Design:
WHEN the page is viewed on smaller screens
THE SYSTEM SHALL maintain proper layout with adjusted spacing and font sizes for mobile devices

WHEN the doctors table is viewed on mobile
THE SYSTEM SHALL reduce padding and font size while maintaining readability