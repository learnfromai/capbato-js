Page Display and Initial Loading:
WHEN a user navigates to the appointments page 
THE SYSTEM SHALL display the appointments page with header navigation, sidebar menu, and main content area

WHEN the appointments page loads 
THE SYSTEM SHALL set the current date in the date picker input field and load today's appointments by default

WHEN the appointments page loads 
THE SYSTEM SHALL display the page title "Appointments" and an "Add Appointment" button in the header area

WHEN the appointments page loads 
THE SYSTEM SHALL display filter controls with date picker labeled "Select Date:" and "Show All" checkbox

---

Sidebar Navigation and Profile:
WHEN the appointments page loads 
THE SYSTEM SHALL highlight the "Appointments" menu item as active in the sidebar navigation

WHEN a user clicks on any sidebar navigation item 
THE SYSTEM SHALL navigate to the corresponding page (Dashboard, Patients, Laboratory, Prescriptions, Doctors)

WHEN the appointments page loads 
THE SYSTEM SHALL display the user's role and username in the header area

WHEN a user clicks on the profile avatar 
THE SYSTEM SHALL display a dropdown menu with "Settings" and "Logout" options

WHEN a user clicks the "Logout" option 
THE SYSTEM SHALL clear user session data and redirect to the login page

---

Appointments Table Display:
WHEN appointments data loads successfully 
THE SYSTEM SHALL display appointments in a table with columns: Patient #, Patient Name, Reason for Visit, Date, Time, Doctor, Status, Action

WHEN appointments are displayed in the table 
THE SYSTEM SHALL format patient names in proper case (first letter capitalized)

WHEN appointments are displayed in the table 
THE SYSTEM SHALL format dates in readable format (e.g., "Jan 15, 2024") and times in 12-hour format with AM/PM

WHEN appointments are displayed in the table 
THE SYSTEM SHALL display status with color coding: green for "Confirmed", red for "Cancelled"

WHEN no appointments are found for the selected criteria 
THE SYSTEM SHALL display "No appointments found." or "No upcoming appointments for today." message in the table

WHEN appointments data loads successfully 
THE SYSTEM SHALL display the total appointment count with breakdown of confirmed and cancelled appointments

---

Date Filtering and Show All Controls:
WHEN a user changes the date in the date picker 
THE SYSTEM SHALL uncheck the "Show All" checkbox and load appointments for the selected date

WHEN a user checks the "Show All" checkbox 
THE SYSTEM SHALL load and display all appointments across all dates sorted from latest to oldest

WHEN a user unchecks the "Show All" checkbox 
THE SYSTEM SHALL reload appointments for the currently selected date

WHEN "Show All" is active 
THE SYSTEM SHALL sort appointments by date and time from newest to oldest

WHEN viewing a specific date 
THE SYSTEM SHALL maintain chronological order for that date

---

Add Appointment Functionality:
WHEN a user clicks the "Add Appointment" button 
THE SYSTEM SHALL display an overlay with an iframe containing the add appointment form

WHEN the add appointment overlay is displayed 
THE SYSTEM SHALL show a close button (X) in the top-right corner of the overlay

WHEN a user clicks the close button or outside the overlay 
THE SYSTEM SHALL close the add appointment overlay and clear the iframe source

WHEN an appointment is successfully added 
THE SYSTEM SHALL close the overlay, show a success toast notification, and refresh the appointments table

WHEN an appointment is added with a specific date 
THE SYSTEM SHALL set the date picker to that date, uncheck "Show All", and display appointments for that date

---

Appointment Status Management:
WHEN an appointment has "Confirmed" status 
THE SYSTEM SHALL display "Modify" and "Cancel" buttons in the Action column

WHEN an appointment has "Cancelled" status 
THE SYSTEM SHALL display only a "Reconfirm" button in the Action column

WHEN a user clicks the "Cancel" button 
THE SYSTEM SHALL display a confirmation modal with "Are you sure you want to cancel this appointment?" message

WHEN a user confirms cancellation in the modal 
THE SYSTEM SHALL update the appointment status to "Cancelled", show success toast, and refresh the table

WHEN a user clicks the "Reconfirm" button and the time slot has available capacity 
THE SYSTEM SHALL display a confirmation modal with "Reconfirm this appointment?" message

WHEN a user confirms reconfirmation and time slot is available 
THE SYSTEM SHALL update the appointment status to "Confirmed", show success toast, and refresh the table

WHEN a user clicks "Reconfirm" but the time slot is fully booked (4 appointments) 
THE SYSTEM SHALL open the add appointment form in edit mode to allow time/date modification

---

Appointment Modification:
WHEN a user clicks the "Modify" button 
THE SYSTEM SHALL display the add appointment overlay with the form pre-populated with existing appointment data

WHEN the modify appointment form is displayed 
THE SYSTEM SHALL change the form title to indicate edit mode

WHEN an appointment is successfully modified 
THE SYSTEM SHALL close the overlay, show success toast, and refresh the appointments table to reflect changes

---

Confirmation Modal Interactions:
WHEN a confirmation modal is displayed 
THE SYSTEM SHALL show "Yes" and "No" buttons with appropriate icons

WHEN a user clicks "Yes" in a confirmation modal 
THE SYSTEM SHALL execute the confirmed action and close the modal

WHEN a user clicks "No" in a confirmation modal 
THE SYSTEM SHALL cancel the action and close the modal without making changes

WHEN a confirmation modal is displayed 
THE SYSTEM SHALL prevent interaction with background elements until the modal is closed

---

Data Loading and Error Handling:
WHEN the appointments page loads 
THE SYSTEM SHALL fetch appointments data from the backend API endpoint

WHEN appointments data is being loaded 
THE SYSTEM SHALL handle loading states appropriately

WHEN appointments data fails to load 
THE SYSTEM SHALL display "Error loading appointments." message in the table and set appointment count to 0

WHEN an API operation fails 
THE SYSTEM SHALL display an appropriate error message to the user

WHEN appointment status update fails 
THE SYSTEM SHALL display error feedback and maintain the current appointment state

---

Toast Notifications and User Feedback:
WHEN an appointment action is completed successfully 
THE SYSTEM SHALL display a toast notification with success message for 2 seconds

WHEN an appointment is cancelled successfully 
THE SYSTEM SHALL show "Appointment cancelled successfully!" toast message

WHEN an appointment is reconfirmed successfully 
THE SYSTEM SHALL show "Appointment reconfirmed successfully!" toast message

WHEN a toast notification is displayed 
THE SYSTEM SHALL position it at the top center of the viewport and auto-hide after the specified duration

---

Admin-Specific Features:
WHEN a user with admin role accesses the appointments page 
THE SYSTEM SHALL add an "Accounts" menu item to the sidebar navigation

WHEN an admin user clicks the "Accounts" menu item 
THE SYSTEM SHALL navigate to the accounts management page

---

Responsive Behavior and UI State:
WHEN appointments table contains multiple entries 
THE SYSTEM SHALL maintain proper column sizing and text alignment (names left-aligned, numbers and dates center-aligned)

WHEN action buttons are displayed in the table 
THE SYSTEM SHALL ensure proper spacing and alignment of Modify/Cancel/Reconfirm buttons

WHEN the appointments page is displayed 
THE SYSTEM SHALL maintain consistent styling with other pages using the clinic's color scheme and branding

WHEN interactive elements are hovered 
THE SYSTEM SHALL provide visual feedback with hover effects on buttons and clickable elements